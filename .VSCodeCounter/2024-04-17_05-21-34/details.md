# Details

Date : 2024-04-17 05:21:34

Directory /home/v-chaofanlin/LLMOS-Parrot/parrot

Total : 114 files,  8338 codes, 3097 comments, 2912 blanks, all 14347 lines

[Summary](results.md) / Details / [Diff Summary](diff.md) / [Diff Details](diff-details.md)

## Files
| filename | language | code | comment | blank | total |
| :--- | :--- | ---: | ---: | ---: | ---: |
| [parrot/__init__.py](/parrot/__init__.py) | py | 2 | 4 | 5 | 11 |
| [parrot/constants.py](/parrot/constants.py) | py | 22 | 11 | 9 | 42 |
| [parrot/engine/__init__.py](/parrot/engine/__init__.py) | py | 0 | 8 | 3 | 11 |
| [parrot/engine/builtin/__init__.py](/parrot/engine/builtin/__init__.py) | py | 0 | 0 | 1 | 1 |
| [parrot/engine/builtin/attn_func.py](/parrot/engine/builtin/attn_func.py) | py | 529 | 96 | 113 | 738 |
| [parrot/engine/builtin/builtin_engine.py](/parrot/engine/builtin/builtin_engine.py) | py | 147 | 18 | 36 | 201 |
| [parrot/engine/builtin/builtin_runner.py](/parrot/engine/builtin/builtin_runner.py) | py | 141 | 18 | 41 | 200 |
| [parrot/engine/builtin/iter_state.py](/parrot/engine/builtin/iter_state.py) | py | 33 | 15 | 13 | 61 |
| [parrot/engine/builtin/kernels/__init__.py](/parrot/engine/builtin/kernels/__init__.py) | py | 9 | 3 | 5 | 17 |
| [parrot/engine/builtin/kernels/flash_attention_with_context.py](/parrot/engine/builtin/kernels/flash_attention_with_context.py) | py | 24 | 25 | 12 | 61 |
| [parrot/engine/builtin/kernels/rms_norm.py](/parrot/engine/builtin/kernels/rms_norm.py) | py | 67 | 19 | 14 | 100 |
| [parrot/engine/builtin/kernels/rotary_embedding.py](/parrot/engine/builtin/kernels/rotary_embedding.py) | py | 129 | 23 | 23 | 175 |
| [parrot/engine/builtin/kernels/shared_flash_decoding.py](/parrot/engine/builtin/kernels/shared_flash_decoding.py) | py | 378 | 40 | 53 | 471 |
| [parrot/engine/builtin/kernels/tokens_moving.py](/parrot/engine/builtin/kernels/tokens_moving.py) | py | 352 | 52 | 87 | 491 |
| [parrot/engine/builtin/kernels/vllm/__init__.py](/parrot/engine/builtin/kernels/vllm/__init__.py) | py | 4 | 5 | 4 | 13 |
| [parrot/engine/builtin/kernels/vllm/paged_attention.py](/parrot/engine/builtin/kernels/vllm/paged_attention.py) | py | 84 | 24 | 27 | 135 |
| [parrot/engine/builtin/kernels/vllm/reshape_and_cache.py](/parrot/engine/builtin/kernels/vllm/reshape_and_cache.py) | py | 54 | 2 | 10 | 66 |
| [parrot/engine/builtin/kernels/vllm/rms_norm.py](/parrot/engine/builtin/kernels/vllm/rms_norm.py) | py | 10 | 2 | 5 | 17 |
| [parrot/engine/builtin/kernels/vllm/rotary_embed.py](/parrot/engine/builtin/kernels/vllm/rotary_embed.py) | py | 16 | 3 | 7 | 26 |
| [parrot/engine/builtin/mem.py](/parrot/engine/builtin/mem.py) | py | 130 | 37 | 40 | 207 |
| [parrot/engine/builtin/mem_layout.py](/parrot/engine/builtin/mem_layout.py) | py | 12 | 3 | 8 | 23 |
| [parrot/engine/builtin/model_instantiation.py](/parrot/engine/builtin/model_instantiation.py) | py | 46 | 14 | 21 | 81 |
| [parrot/engine/builtin/models/__init__.py](/parrot/engine/builtin/models/__init__.py) | py | 6 | 2 | 5 | 13 |
| [parrot/engine/builtin/models/llama.py](/parrot/engine/builtin/models/llama.py) | py | 173 | 51 | 40 | 264 |
| [parrot/engine/builtin/models/model_utils.py](/parrot/engine/builtin/models/model_utils.py) | py | 12 | 3 | 7 | 22 |
| [parrot/engine/builtin/models/opt.py](/parrot/engine/builtin/models/opt.py) | py | 224 | 48 | 48 | 320 |
| [parrot/engine/builtin/models/sampler.py](/parrot/engine/builtin/models/sampler.py) | py | 39 | 12 | 16 | 67 |
| [parrot/engine/builtin/models/weight_utils.py](/parrot/engine/builtin/models/weight_utils.py) | py | 30 | 10 | 10 | 50 |
| [parrot/engine/config.py](/parrot/engine/config.py) | py | 94 | 30 | 41 | 165 |
| [parrot/engine/context/__init__.py](/parrot/engine/context/__init__.py) | py | 0 | 0 | 1 | 1 |
| [parrot/engine/context/block_context.py](/parrot/engine/context/block_context.py) | py | 75 | 26 | 35 | 136 |
| [parrot/engine/context/context_manager.py](/parrot/engine/context/context_manager.py) | py | 28 | 15 | 13 | 56 |
| [parrot/engine/context/low_level_context.py](/parrot/engine/context/low_level_context.py) | py | 32 | 11 | 18 | 61 |
| [parrot/engine/context/text_context.py](/parrot/engine/context/text_context.py) | py | 62 | 10 | 20 | 92 |
| [parrot/engine/engine_creator.py](/parrot/engine/engine_creator.py) | py | 30 | 14 | 15 | 59 |
| [parrot/engine/engine_scheduler.py](/parrot/engine/engine_scheduler.py) | py | 119 | 48 | 53 | 220 |
| [parrot/engine/http_server.py](/parrot/engine/http_server.py) | py | 146 | 10 | 41 | 197 |
| [parrot/engine/latency_analyzer.py](/parrot/engine/latency_analyzer.py) | py | 13 | 6 | 14 | 33 |
| [parrot/engine/llm_engine.py](/parrot/engine/llm_engine.py) | py | 80 | 53 | 35 | 168 |
| [parrot/engine/openai/__init__.py](/parrot/engine/openai/__init__.py) | py | 0 | 0 | 1 | 1 |
| [parrot/engine/openai/api_endpoint.py](/parrot/engine/openai/api_endpoint.py) | py | 8 | 8 | 8 | 24 |
| [parrot/engine/openai/openai_engine.py](/parrot/engine/openai/openai_engine.py) | py | 163 | 29 | 46 | 238 |
| [parrot/engine/primitive_job.py](/parrot/engine/primitive_job.py) | py | 81 | 18 | 24 | 123 |
| [parrot/exceptions.py](/parrot/exceptions.py) | py | 13 | 10 | 15 | 38 |
| [parrot/frontend/pfunc/__init__.py](/parrot/frontend/pfunc/__init__.py) | py | 6 | 9 | 7 | 22 |
| [parrot/frontend/pfunc/function.py](/parrot/frontend/pfunc/function.py) | py | 257 | 82 | 96 | 435 |
| [parrot/frontend/pfunc/function_body.py](/parrot/frontend/pfunc/function_body.py) | py | 30 | 10 | 21 | 61 |
| [parrot/frontend/pfunc/interface.py](/parrot/frontend/pfunc/interface.py) | py | 133 | 27 | 43 | 203 |
| [parrot/frontend/pfunc/perf_criteria.py](/parrot/frontend/pfunc/perf_criteria.py) | py | 4 | 2 | 2 | 8 |
| [parrot/frontend/pfunc/semantic_variable.py](/parrot/frontend/pfunc/semantic_variable.py) | py | 79 | 11 | 31 | 121 |
| [parrot/frontend/pfunc/transforms/__init__.py](/parrot/frontend/pfunc/transforms/__init__.py) | py | 0 | 0 | 1 | 1 |
| [parrot/frontend/pfunc/transforms/body_reorder.py](/parrot/frontend/pfunc/transforms/body_reorder.py) | py | 0 | 3 | 3 | 6 |
| [parrot/frontend/pfunc/transforms/conversation_template.py](/parrot/frontend/pfunc/transforms/conversation_template.py) | py | 95 | 21 | 22 | 138 |
| [parrot/frontend/pfunc/transforms/few_shots_example_inserter.py](/parrot/frontend/pfunc/transforms/few_shots_example_inserter.py) | py | 0 | 3 | 2 | 5 |
| [parrot/frontend/pfunc/transforms/func_mutator.py](/parrot/frontend/pfunc/transforms/func_mutator.py) | py | 48 | 14 | 18 | 80 |
| [parrot/frontend/pfunc/transforms/prompt_compressor.py](/parrot/frontend/pfunc/transforms/prompt_compressor.py) | py | 0 | 3 | 2 | 5 |
| [parrot/frontend/pfunc/transforms/prompt_formatter.py](/parrot/frontend/pfunc/transforms/prompt_formatter.py) | py | 43 | 6 | 24 | 73 |
| [parrot/frontend/pfunc/transforms/sequential.py](/parrot/frontend/pfunc/transforms/sequential.py) | py | 9 | 4 | 10 | 23 |
| [parrot/frontend/pfunc/vm.py](/parrot/frontend/pfunc/vm.py) | py | 216 | 85 | 68 | 369 |
| [parrot/protocol/__init__.py](/parrot/protocol/__init__.py) | py | 0 | 5 | 3 | 8 |
| [parrot/protocol/base_response.py](/parrot/protocol/base_response.py) | py | 14 | 6 | 11 | 31 |
| [parrot/protocol/http_utils.py](/parrot/protocol/http_utils.py) | py | 63 | 4 | 16 | 83 |
| [parrot/protocol/internal/layer_apis.py](/parrot/protocol/internal/layer_apis.py) | py | 83 | 21 | 35 | 139 |
| [parrot/protocol/internal/primitive_request.py](/parrot/protocol/internal/primitive_request.py) | py | 125 | 15 | 20 | 160 |
| [parrot/protocol/internal/runtime_info.py](/parrot/protocol/internal/runtime_info.py) | py | 23 | 22 | 9 | 54 |
| [parrot/protocol/public/api_version.py](/parrot/protocol/public/api_version.py) | py | 1 | 2 | 2 | 5 |
| [parrot/protocol/public/apis.py](/parrot/protocol/public/apis.py) | py | 196 | 22 | 47 | 265 |
| [parrot/sampling_config.py](/parrot/sampling_config.py) | py | 26 | 8 | 9 | 43 |
| [parrot/serve/__init__.py](/parrot/serve/__init__.py) | py | 0 | 5 | 2 | 7 |
| [parrot/serve/backend_repr/__init__.py](/parrot/serve/backend_repr/__init__.py) | py | 3 | 5 | 3 | 11 |
| [parrot/serve/backend_repr/context.py](/parrot/serve/backend_repr/context.py) | py | 43 | 19 | 15 | 77 |
| [parrot/serve/backend_repr/engine.py](/parrot/serve/backend_repr/engine.py) | py | 99 | 29 | 59 | 187 |
| [parrot/serve/backend_repr/model.py](/parrot/serve/backend_repr/model.py) | py | 35 | 10 | 20 | 65 |
| [parrot/serve/config.py](/parrot/serve/config.py) | py | 17 | 13 | 10 | 40 |
| [parrot/serve/context_manager.py](/parrot/serve/context_manager.py) | py | 190 | 96 | 84 | 370 |
| [parrot/serve/core.py](/parrot/serve/core.py) | py | 150 | 119 | 74 | 343 |
| [parrot/serve/engine_manager.py](/parrot/serve/engine_manager.py) | py | 88 | 48 | 47 | 183 |
| [parrot/serve/graph/__init__.py](/parrot/serve/graph/__init__.py) | py | 6 | 6 | 3 | 15 |
| [parrot/serve/graph/graph.py](/parrot/serve/graph/graph.py) | py | 259 | 66 | 90 | 415 |
| [parrot/serve/graph/graph_traverse.py](/parrot/serve/graph/graph_traverse.py) | py | 32 | 22 | 17 | 71 |
| [parrot/serve/graph/nodes.py](/parrot/serve/graph/nodes.py) | py | 153 | 36 | 70 | 259 |
| [parrot/serve/graph/perf_criteria.py](/parrot/serve/graph/perf_criteria.py) | py | 17 | 8 | 12 | 37 |
| [parrot/serve/graph/request.py](/parrot/serve/graph/request.py) | py | 136 | 61 | 71 | 268 |
| [parrot/serve/graph/semantic_variable.py](/parrot/serve/graph/semantic_variable.py) | py | 46 | 33 | 27 | 106 |
| [parrot/serve/graph/visualize_utils.py](/parrot/serve/graph/visualize_utils.py) | py | 46 | 9 | 24 | 79 |
| [parrot/serve/http_server.py](/parrot/serve/http_server.py) | py | 168 | 17 | 56 | 241 |
| [parrot/serve/prefix_matcher.py](/parrot/serve/prefix_matcher.py) | py | 38 | 31 | 21 | 90 |
| [parrot/serve/scheduler/__init__.py](/parrot/serve/scheduler/__init__.py) | py | 3 | 2 | 3 | 8 |
| [parrot/serve/scheduler/completion_task.py](/parrot/serve/scheduler/completion_task.py) | py | 67 | 16 | 30 | 113 |
| [parrot/serve/scheduler/global_scheduler.py](/parrot/serve/scheduler/global_scheduler.py) | py | 149 | 46 | 51 | 246 |
| [parrot/serve/scheduler/schedule_annotation.py](/parrot/serve/scheduler/schedule_annotation.py) | py | 6 | 9 | 8 | 23 |
| [parrot/serve/scheduler/task_creator.py](/parrot/serve/scheduler/task_creator.py) | py | 42 | 18 | 20 | 80 |
| [parrot/serve/session/__init__.py](/parrot/serve/session/__init__.py) | py | 0 | 0 | 1 | 1 |
| [parrot/serve/session/graph_executor.py](/parrot/serve/session/graph_executor.py) | py | 144 | 28 | 38 | 210 |
| [parrot/serve/session/session.py](/parrot/serve/session/session.py) | py | 84 | 65 | 43 | 192 |
| [parrot/serve/session_manager.py](/parrot/serve/session_manager.py) | py | 74 | 44 | 36 | 154 |
| [parrot/serve/tokenizer_wrapper.py](/parrot/serve/tokenizer_wrapper.py) | py | 44 | 17 | 21 | 82 |
| [parrot/serve/variable_manager.py](/parrot/serve/variable_manager.py) | py | 195 | 79 | 73 | 347 |
| [parrot/testing/__init__.py](/parrot/testing/__init__.py) | py | 0 | 3 | 2 | 5 |
| [parrot/testing/fake_core_server.py](/parrot/testing/fake_core_server.py) | py | 100 | 4 | 39 | 143 |
| [parrot/testing/fake_engine_server.py](/parrot/testing/fake_engine_server.py) | py | 164 | 16 | 60 | 240 |
| [parrot/testing/get_configs.py](/parrot/testing/get_configs.py) | py | 7 | 10 | 8 | 25 |
| [parrot/testing/latency_simulator.py](/parrot/testing/latency_simulator.py) | py | 14 | 805 | 11 | 830 |
| [parrot/testing/localhost_server_daemon.py](/parrot/testing/localhost_server_daemon.py) | py | 126 | 12 | 49 | 187 |
| [parrot/testing/model_runner_test_template.py](/parrot/testing/model_runner_test_template.py) | py | 158 | 6 | 30 | 194 |
| [parrot/testing/multiproc_manager.py](/parrot/testing/multiproc_manager.py) | py | 25 | 7 | 15 | 47 |
| [parrot/testing/vllm_runner.py](/parrot/testing/vllm_runner.py) | py | 47 | 12 | 17 | 76 |
| [parrot/utils/__init__.py](/parrot/utils/__init__.py) | py | 12 | 2 | 7 | 21 |
| [parrot/utils/async_utils.py](/parrot/utils/async_utils.py) | py | 21 | 4 | 9 | 34 |
| [parrot/utils/gpu_mem_track.py](/parrot/utils/gpu_mem_track.py) | py | 123 | 14 | 19 | 156 |
| [parrot/utils/logging.py](/parrot/utils/logging.py) | py | 47 | 4 | 24 | 75 |
| [parrot/utils/misc.py](/parrot/utils/misc.py) | py | 36 | 11 | 20 | 67 |
| [parrot/utils/profile.py](/parrot/utils/profile.py) | py | 33 | 3 | 13 | 49 |
| [parrot/utils/recycle_pool.py](/parrot/utils/recycle_pool.py) | py | 23 | 6 | 15 | 44 |

[Summary](results.md) / Details / [Diff Summary](diff.md) / [Diff Details](diff-details.md)